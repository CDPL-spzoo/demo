import { expect } from '@playwright/test';
const vehicleTab = '[aria-label="vehicles"]';
const mobileMenuButton = '.MenuMobile-menuButton';

export class BasePage {
    constructor(page, context, locale) {
        this.locale = locale;
        this.page = page;
        this.context = context;
        // this.page.addInitScript(() => {
        //             window.localStorage.setItem('auth.strategy', 'local'),
        //             window.localStorage.setItem('_uetvid', '80db0f20fac611edbe08231d5be38dd1'),
        //             window.localStorage.setItem('_uetsid', '37109c1003ab11eea4fcab96092a89b4'),
        //             window.localStorage.setItem('_uetsid_exp', 'Wed, 07 Jun 2023 13:01:15 GMT'),
        //             window.localStorage.setItem('_uetvid_exp', 'Sun, 30 Jun 2024 13:01:15 GMT')
        // });
        // if(this.locale === 'en-US'){
        //     this.context.addCookies([{"domain":".ridedev.io","expirationDate":1720684737.989928,"hostOnly":false,"httpOnly":false,"name":"_ga","path":"/","secure":false,"session":false,"storeId":"0","value":"GA1.1.1545660314.1684996599"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717664071.271984,"hostOnly":true,"httpOnly":false,"name":"currency","path":"/","secure":false,"session":false,"storeId":"0","value":"EUR"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717664071.272037,"hostOnly":true,"httpOnly":false,"name":"distanceUnit","path":"/","secure":false,"session":false,"storeId":"0","value":"km"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717664071.271904,"hostOnly":true,"httpOnly":false,"name":"country","path":"/","secure":false,"session":false,"storeId":"0","value":"FR"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1686147357.346454,"hostOnly":true,"httpOnly":false,"name":"timezone","path":"/","sameSite":"Lax","secure":false,"session":false,"storeId":"0","value":"Europe%2FMoscow"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1686147357,"hostOnly":true,"httpOnly":false,"name":"ln_or","path":"/","secure":false,"session":false,"storeId":"0","value":"eyIxOTEwMzMyIjoiZCJ9"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717164960,"hostOnly":true,"httpOnly":false,"name":"authToken","path":"/","secure":false,"session":false,"storeId":"0","value":"eyJhbGciOiJSUzI1NiIsImtpZCI6InpjQmJsV1dyel9iX0FXQVBtUmJmSlhJakZSSVIzZmJlcEs4Wi0xREtoZDAifQ.eyJzdWIiOiI2NDRhMzEwZjA4OGYyZTVmYjAzMjJhZmEiLCJmaXJzdE5hbWUiOiJEaWFuYSIsImxhc3ROYW1lIjoiS0hBUllUQU5PVklDSCIsImVtYWlsIjoiZGlhbmEua2hhcnl0YW5vdmljaEBmcmVlMm1vdmUuY29tIiwiX2lkIjoiNjQ0YTMxMGYwODhmMmU1ZmIwMzIyYWZhIiwiaWF0IjoxNjg2MDYwNzI0LCJleHAiOjE2ODcyNzAzMjR9.cF-a4SWhYZ1L0-_xxmZFppffGMRagykpQ5CWVITdNqASZQhrFyHQEFiK0lmJ-sd4VfLYfWFTd-1mVhv0BnUmLUB6qzpMkHd601J9-JvMh_AAL0G-152XgKpLhfmImgA3H7s4-CA1NT1ojxuP5ZDm2oZRWDxXvG0Au7xfyVkGJydrLk6GiV3YWyl_bHQlrIkBvOOE-9K8h5RBGs1QhUw6URj3rnzvD-8eiRa8Lr-DDTGUGiDJ5CPYwh69DSvkw8co1GPW1v4_fgkiFfcQGVzDWSOyMrBlZQUOFlyEvw6oRdOu4RrO0QwnrOVm89Oi-OElzBdvqw0AscBj3gOMxW9HJg"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717664071.272012,"hostOnly":true,"httpOnly":false,"name":"language","path":"/","secure":false,"session":false,"storeId":"0","value":"en"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717660737,"hostOnly":true,"httpOnly":false,"name":"i18n_redirected","path":"/","sameSite":"Lax","secure":false,"session":false,"storeId":"0","value":"en-US"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"auth.strategy","path":"/","secure":false,"session":true,"storeId":"0","value":"local"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsent","path":"/","secure":false,"session":true,"storeId":"0","value":"true"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentBeOp","path":"/","secure":false,"session":true,"storeId":"0","value":"true"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentCallBell","path":"/","secure":false,"session":true,"storeId":"0","value":"true"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentFacebook","path":"/","secure":false,"session":true,"storeId":"0","value":"false"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentTaboola","path":"/","secure":false,"session":true,"storeId":"0","value":"true"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentInspectlet","path":"/","secure":false,"session":true,"storeId":"0","value":"true"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentDoubleClick","path":"/","secure":false,"session":true,"storeId":"0","value":"true"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentHotjar","path":"/","secure":false,"session":true,"storeId":"0","value":"true"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentGoogleAnalytics","path":"/","secure":false,"session":true,"storeId":"0","value":"true"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentGoogleAdwords","path":"/","secure":false,"session":true,"storeId":"0","value":"true"},{"domain":".ridedev.io","expirationDate":1686211138,"hostOnly":false,"httpOnly":false,"name":"_uetsid","path":"/","secure":false,"session":false,"storeId":"0","value":"37109c1003ab11eea4fcab96092a89b4"},{"domain":".ridedev.io","expirationDate":1719820738,"hostOnly":false,"httpOnly":false,"name":"_uetvid","path":"/","secure":false,"session":false,"storeId":"0","value":"80db0f20fac611edbe08231d5be38dd1"},{"domain":".ridedev.io","expirationDate":1720684831.931553,"hostOnly":false,"httpOnly":false,"name":"_ga_DC20HFE0EF","path":"/","secure":false,"session":false,"storeId":"0","value":"GS1.1.1686124728.16.1.1686124831.0.0.0"}])
        // }
        // else {
        //     this.context.addCookies([{"domain":".ridedev.io","expirationDate":1720621025.259585,"hostOnly":false,"httpOnly":false,"name":"_ga","path":"/","secure":false,"session":false,"storeId":"0","value":"GA1.1.1545660314.1684996599"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717597027.419907,"hostOnly":true,"httpOnly":false,"name":"currency","path":"/","secure":false,"session":false,"storeId":"0","value":"EUR"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717597027.419952,"hostOnly":true,"httpOnly":false,"name":"distanceUnit","path":"/","secure":false,"session":false,"storeId":"0","value":"km"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"auth.strategy","path":"/","secure":false,"session":true,"storeId":"0","value":"local"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsent","path":"/","secure":false,"session":true,"storeId":"0","value":"true"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentFacebook","path":"/","secure":false,"session":true,"storeId":"0","value":"false"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentBeOp","path":"/","secure":false,"session":true,"storeId":"0","value":"false"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentCallBell","path":"/","secure":false,"session":true,"storeId":"0","value":"false"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentTaboola","path":"/","secure":false,"session":true,"storeId":"0","value":"false"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentInspectlet","path":"/","secure":false,"session":true,"storeId":"0","value":"false"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentDoubleClick","path":"/","secure":false,"session":true,"storeId":"0","value":"false"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentHotjar","path":"/","secure":false,"session":true,"storeId":"0","value":"false"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentGoogleAnalytics","path":"/","secure":false,"session":true,"storeId":"0","value":"false"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","hostOnly":true,"httpOnly":false,"name":"cookieConsentGoogleAdwords","path":"/","secure":false,"session":true,"storeId":"0","value":"false"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717597027.419817,"hostOnly":true,"httpOnly":false,"name":"country","path":"/","secure":false,"session":false,"storeId":"0","value":"FR"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1686147357.346454,"hostOnly":true,"httpOnly":false,"name":"timezone","path":"/","secure":false,"session":false,"storeId":"0","value":"Europe%2FMoscow"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1686147357,"hostOnly":true,"httpOnly":false,"name":"ln_or","path":"/","secure":false,"session":false,"storeId":"0","value":"eyIxOTEwMzMyIjoiZCJ9"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717164960,"hostOnly":true,"httpOnly":false,"name":"authToken","path":"/","secure":false,"session":false,"storeId":"0","value":"eyJhbGciOiJSUzI1NiIsImtpZCI6InpjQmJsV1dyel9iX0FXQVBtUmJmSlhJakZSSVIzZmJlcEs4Wi0xREtoZDAifQ.eyJzdWIiOiI2NDRhMzEwZjA4OGYyZTVmYjAzMjJhZmEiLCJmaXJzdE5hbWUiOiJEaWFuYSIsImxhc3ROYW1lIjoiS0hBUllUQU5PVklDSCIsImVtYWlsIjoiZGlhbmEua2hhcnl0YW5vdmljaEBmcmVlMm1vdmUuY29tIiwiX2lkIjoiNjQ0YTMxMGYwODhmMmU1ZmIwMzIyYWZhIiwiaWF0IjoxNjg2MDYwNzI0LCJleHAiOjE2ODcyNzAzMjR9.cF-a4SWhYZ1L0-_xxmZFppffGMRagykpQ5CWVITdNqASZQhrFyHQEFiK0lmJ-sd4VfLYfWFTd-1mVhv0BnUmLUB6qzpMkHd601J9-JvMh_AAL0G-152XgKpLhfmImgA3H7s4-CA1NT1ojxuP5ZDm2oZRWDxXvG0Au7xfyVkGJydrLk6GiV3YWyl_bHQlrIkBvOOE-9K8h5RBGs1QhUw6URj3rnzvD-8eiRa8Lr-DDTGUGiDJ5CPYwh69DSvkw8co1GPW1v4_fgkiFfcQGVzDWSOyMrBlZQUOFlyEvw6oRdOu4RrO0QwnrOVm89Oi-OElzBdvqw0AscBj3gOMxW9HJg"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717597027.419931,"hostOnly":true,"httpOnly":false,"name":"language","path":"/","secure":false,"session":false,"storeId":"0","value":"fr"},{"domain":"front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io","expirationDate":1717597026,"hostOnly":true,"httpOnly":false,"name":"i18n_redirected","path":"/","secure":false,"session":false,"storeId":"0","value":"fr-FR"},{"domain":".ridedev.io","expirationDate":1686147425,"hostOnly":false,"httpOnly":false,"name":"_uetsid","path":"/","secure":false,"session":false,"storeId":"0","value":"37109c1003ab11eea4fcab96092a89b4"},{"domain":".ridedev.io","expirationDate":1719757025,"hostOnly":false,"httpOnly":false,"name":"_uetvid","path":"/","secure":false,"session":false,"storeId":"0","value":"80db0f20fac611edbe08231d5be38dd1"},{"domain":".ridedev.io","expirationDate":1720621025.272266,"hostOnly":false,"httpOnly":false,"name":"_ga_DC20HFE0EF","path":"/","secure":false,"session":false,"storeId":"0","value":"GS1.1.1686059721.15.1.1686061025.0.0.0"}])
        // }
        this.context.addCookies([
            {
                name: 'authToken',
                value: process.env.AUTH_TOKEN,
                domain: 'front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io',
                path: '/'
            },
            {
                name: 'cookieConsent',
                value: 'true',
                domain: 'front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io',
                path: '/'
            },
            {
                name: 'auth.strategy',
                value: 'local',
                domain: 'front-connected-fleet.eks-eu-central-1-private.int.connectedfleet.ridedev.io',
                path: '/'
            }
        ]);
    }
    getNavLinkByLabel = (label) => this.page.locator(`[aria-label="${label}"]`);
    clickNavLinkByLabel = (label) => this.getNavLinkByLabel(label).click();
    clickCloseButton = () => this.page.click('.Consent-buttonClose');
    getMobileMenuButton = () => this.page.locator(mobileMenuButton);
    clickMobileMenuButton = () => this.getMobileMenuButton().click();
    waitForSpinner = async () => {
        let spinner = false;
        let time = 0;
        const loader = '.ListArray-loader';
        while (!spinner && time < 40) {
            if (await this.page.locator(loader).count()) {
                await expect(this.page.locator(loader)).toHaveCount(0);
                spinner = true;
                break;
            }
            await this.page.waitForTimeout(50);
            time++;
        }
    };
}
